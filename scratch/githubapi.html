<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scratch</title>
  </head>
  <body>
    <script>
      const GITHUB_TOKEN = "";

      let uniqueFollowers = new Set();
      let cnt = 1;

      function processFollowers(data) {
        for (const follower of data) {
          uniqueFollowers.add(follower.login);
        }
      }

      async function retrieveUserFollowers(user, cnt) {
        try {
          const response = await fetch(
            "https://api.github.com/users/" + user + "/followers?page=" + cnt,
            {
              headers: {
                Authorization: `token ${GITHUB_TOKEN}`, // or `Bearer ${GITHUB_TOKEN}`
                "User-Agent": "MyGitHubApp", // GitHub requires a user agent string
              },
            }
          );
          //console.log(response);
          const data = await response.json();
          //console.log(data);
          processFollowers(data);
        } catch (error) {
          console.error("Error:", error);
        }
      }

      async function main() {
        let user = "gocklkatz";
        await retrieveUserFollowers(user, 1);

        for (const follower of uniqueFollowers) {
          //   console.log("Follower: " + follower);
          //   console.log("uniqueFollowers: " + uniqueFollowers.size);
          await retrieveUserFollowers(follower, 1);
        }

        //console.log(uniqueFollowers.size);
      }

      //main();
    </script>
  </body>
</html>